/**
* 功能说明:		上传图片使用Canvas压缩及预览----只支持支持canvas的浏览器
* @author:		vivy <lizhiziyan@qq.com>
* @time:		2016-08-29 17:23:30
* @version:		V1.1.0
* 
* @js调用方法[预览]：
* html:<canvas id="mycanvas" width="50" height="50"></canvas> width/height指压缩后的宽高，必填。
* $("#file").uploadImgs({
* 	viewId:"mycanvas",预览的canvas的ID
* 	allowLack:true,//允许图片失真,默认不允许
* 	tipCallback:function(obj,bool,value){},//返回提示,参数obj,bool<错误false或正确true提示>,value<提示信息>
* 	afterUpload:function(src,obj){},//选择之后，返回src<压缩后的base64>，obj
* 	beforeUpload:function(){}//选择图片之前的回调函数
* })
* 
* @js调用方法[不预览，直接上传]：
* $("#file").uploadImgs({
* 	allowLack:true,//允许图片失真,默认不允许
* 	width:50,//压缩后的宽度，必填
* 	height:50,//压缩后的高度，必填
* 	tipCallback:function(obj,bool,value){},//返回提示,参数obj,bool<错误false或正确true提示>,value<提示信息>
* 	afterUpload:function(src,obj){},//选择之后，返回src<压缩后的base64>，obj
* 	beforeUpload:function(){}//选择图片之前的回调函数
* })
*
*/
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(k($){$.1b.1l=k(e){4 f=p;4 g={w:E,o:j,7:S,6:S,D:E,8:E,u:E};4 h=$.1k(g,e);9 p.1j(k(){4 a=$(f).1g("z"),1f=p,x=t.v(a);$(f).14("Q").1d("Q",k(){2(h.u&&$.y(h.u)){h.u.r(a);2(!h.u())9}Y(x,$("#"+a))})});k Y(x,b){4 c=p;2(!x||!x.Z){2(h.8&&$.y(h.8)){h.8.r(c,j,b)}9}1c(12("13,10,K,L,M"));2(N.1a(x.Z)){2(x.H&&x.H[0]){4 d=19 18();d.17(x.H[0]);d.16=k(a){W(a.1e.15,b)}}}n{4 s="请上传13,10,K,L,M格式的图片";l(b,j,s)}}k W(a,b){2(h.w){4 s=\'<3 11="\'+a+\'" z="5" I="G:F" />\';$(\'V\').U(s);4 d=$("#"+h.w).7(),A=$("#"+h.w).6(),c=t.v(h.w),B=c.O("J"),3=t.v("5");2(3.7<d){l(b,j,"图片宽度小于压缩宽度，继续压缩会导致图片失真，请慎重选择。");2(!h.o)9 $("#5").m()}n 2(3.6<A){l(b,j,"图片高度小于压缩高度，继续压缩会导致图片失真，请慎重选择。");2(!h.o)9 $("#5").m()}n 2(3.7/3.6!=d/A){l(b,j,"压缩后的图片比例不等于原图片，继续压缩会导致图片失真，请慎重选择。");2(!h.o)9 $("#5").m()}B.R(3,0,0,d,A);2(h.8&&$.y(h.8)){h.8.r(p,c.P(),b)}$("#5").m()}n{4 s=\'<3 11="\'+a+\'" z="5" I="G:F" /><X z="q" 7="\'+h.7+\'" 6="\'+h.6+\'" I="G:F"></X>\';$(\'V\').U(s);4 c=t.v("q"),B=c.O("J"),3=t.v("5");2(3.7<h.7){l(b,j,"图片宽度小于压缩宽度，继续压缩会导致图片失真，请慎重选择。");2(!h.o)9 $("#5,#q").m()}n 2(3.6<h.6){l(b,j,"图片高度小于压缩高度，继续压缩会导致图片失真，请慎重选择。");2(!h.o)9 $("#5,#q").m()}n 2(3.7/3.6!=h.7/h.6){l(b,j,"压缩后的图片比例不等于原图片，继续压缩会导致图片失真，请慎重选择。");2(!h.o)9 $("#5,#q").m()}B.R(3,0,0,h.7,h.6);2(h.8&&$.y(h.8)){h.8.r(p,c.P(),b)}$("#5,#q").m()}}k l(a,b,s){h.D&&$.y(h.D)?h.D.r(p,a,b,s):1h(s)}k 12(a){4 b="4 N = /\\\\.";1i(4 i=0;i<a.C(",").T;i++){2(i==a.C(",").T-1)b+=a.C(",")[i];n b+=a.C(",")[i]+"|\\\\."}b+="$/i;";9 b}}})(1m);',62,85,'||if|img|var|uploadImgs_img|height|width|afterUpload|return||||||||||false|function|_tips|remove|else|allowLack|this|uploadImgs_canvas|call||document|beforeUpload|getElementById|viewId||isFunction|id|_h|ctx|split|tipCallback|null|none|display|files|style|2d|gif|bmp|png|patn|getContext|toDataURL|change|drawImage|50|length|append|body|_canvas|canvas|_getImg|value|jpeg|src|_accept|jpg|unbind|result|onload|readAsDataURL|FileReader|new|test|fn|eval|bind|target|that|attr|alert|for|each|extend|uploadImgs|jQuery'.split('|'),0,{}))